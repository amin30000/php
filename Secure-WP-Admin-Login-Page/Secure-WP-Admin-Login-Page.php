احتمالا شما هم توی آموزش های دیگه دیدین که روش هایی مثل قرار دادن رمز عبور برای wp-admin یا تغییر آدرس صفحه لاگین رو آموزش میدن اما از اونجایی که گاهی اوقات این روش ها باعث ایجاد اختلال توی عملکرد برخی افزونه ها میشه، ترجیح میدم ازشون استفاده نکنم!

از طریق این ترفند، ما فقط و فقط با ایجاد یک فایل PHP با نام دلخواه، مسیر دسترسی به صفحه لاگین پیش فرض رو تغییر میدیم! دقت کنید که نام یا آدرس صفحه لاگین رو تغییر ندادیم. فقط مسیر دسترسی به این صفحه رو عوض کردیم. بنابراین از این به بعد برای دسترسی به صفحه لاگین، باید این فایل PHP فراخوانی بشه. روش کارش هم اینجوریه که هر درخواستی از سمت ما به این فایل PHP ارسال بشه، درخواست مون پردازش و سپس به سمت همون آدرس دیفالت لاگین یعنی wp-admin یا wp-login هدایت میشیم. (ریدایرکت میشیم)

پس به طور خلاصه این فایل PHP یه جورایی مثل یه کلید عمل میکنه. کلید دسترسی به همون صفحه لاگین پیش فرض!

از اونجایی که دسترسی به این فایل برابر است با دسترسی به صفحه لاگین، پس حفاظت و مخفی نگه داشتن اسمش، نکته مهم این آموزشه.

و حالا بریم سراغ پیاده سازی این روش … 🙂

مرحله 1: ایجاد فایل PHP و قرار دادن مقدار کوکی دلخواه در آن
به مسیر public_html هاست تون یا هر مسیری که وردپرس داخلش قرار داره برید و یک فایل PHP با هر اسمی که دوست دارید ایجاد کنید. مثلا من یک فایل به این اسم ایجاد میکنم:
WP-MyWeb@Dm!n.php

نکته مهم: داخل اسمی که برای فایل PHP انتخاب میکنید، میتونید از کاراکترهای خاص مثل @ ، _ ، ! و کاراکترهای مشابه استفاده کنید اما طبق تست هایی که من انجام دادم، با بعضی کاراکترها مثل # و $ مشکل داره و در صورتی که اسم فایل تون شامل این کاراکترها باشه، برای دسترسی به صفحه به مشکل میخورید و ارور 404 میگیرید. (علت این موضوع رو نمیدونم)

حالا داخل فایلی که توی مرحله 1 ایجاد کردین، مقدار زیر رو قرار بدین:

<?php
setcookie("FILE_NAME", 1234567890);
header("Location: wp-login.php");

دقت کنید به جای عبارت FILE_NAME باید اسم فایل PHP که ایجاد کردین رو بنویسید. (فقط و فقط اسم فایل بدون پسوند php)
مثلا برای من میشه: WP-MyWeb@Dm!n
اون عدد 10 رقمی هم میتونید به هر مقداری که دوست دارید تغییر بدین. فقط دقت کنید حتما باید به صورت عدد و 10 رقمی باشه.

مرحله 2: معرفی کردن فایل PHP به فایل htaccess
حالا توی همون فولدر public_html دنبال فایل به نام .htaccess بگردید و قطعه کد زیر رو به انتهای این فایل اضافه کنید:

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_COOKIE} !^.*WP\-MyWeb@Dm!n=1234567890.*$ [NC]
RewriteRule wp-login.php - [F]
</IfModule>

دقت کنید داخل خط 3 در صورتی که وردپرس شما توی روت هاست یا همون public_html نصب شده، نیاز به تغییر کد بالا ندارید اما اگر وردپرس شما توی مسیر دیگه ای نصب شده (مثلا داخل یه فولدر مثل آموزش ویدئویی که انتهای همین مطلب قرار دادم)، باید بعد از / اسم اون فولدر رو بنویسید. یعنی در اصل جلوی / باید مسیر نصب وردپرس تون رو قرار بدید.
معمولا ساختار فایل htaccess وردپرس خام دقیقا کدهای بالا رو داره که در اینصورت شما فقط باید کدهای خط 4 و 5 رو به انتهای فایل و قبل از تگ </IfModule> اضافه کنید. (داخل ویدئوی آموزشی دقیقه 2 این قسمت رو کامل توضیح دادم)

در ادامه توی کد بالا داخل خط 4 به جای عبارت WP\-MyWeb@Dm!n باید نام فایل PHP خودتون و به جای اون عدد 10 رقمی، باید مقدار عددی که توی فایل PHP ست کردین رو قرار بدید.
در ضمن در صورتی که ساختار اسم فایل PHP شما هم مشابه مثالی هست که من زدم (بعد از WP یه – گذاشتید)، اون عبارت \ بعد از WP توی خط 4 کدی که داخل htaccess میذارید، حتما باید قرار داشته باشه.

و تمام! 😎

حالا اگر توی مرورگر بخواید به پنل لاگین کنید، با وارد کردن آدرس قبلی wp-admin یا wp-login، ارور 403 میگیرید!



و از این به بعد آدرس جدید دسترسی به صفحه لاگین وبسایت شما میشه:
yourdomain/YOUR_PHP_FILE_NAME.php

به جای عبارت YOUR_PHP_FILE_NAME باید اسم فایل PHP که توی مرحله 1 ایجاد کردید رو قرا بدید. مثلا برای من میشه:
https://example.com/WP-MyWeb@Dm!n.php

خب همونطور که دیدین با 2 مرحله ساده، این صفحه مهم وبسایت رو امن کردیم. امیدوارم که از این آموزش استفاده کنید و ازش لذت ببرید. همچنین اگر مراحل براتون مفهوم نبود، توی کامنت ها بنویسید تا یه ویدئوی آموزشی هم از این روش تهیه کنم.